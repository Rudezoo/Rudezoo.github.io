---
date: 2021-07-30 13:58:10
layout: post
title:  Unreal Devlog#5
subtitle: Unreal Devlog#5
description:  다섯번째 Unreal Devlog
image: /assets/img/post/0730/dev5_t.png
optimized_image: /assets/img/post/0730/dev5_t.png
category: coding
tags: 
    - coding
    - study
    - Unreal
author: Rudezoo
paginate: true
---

# **Unreal Devlog #5**
---

이번에는 여러가지 수정사항도 많고 시행착오도 많고 그래서 상당히 오랜시간이 걸렸다.. 크게 바뀐것은 없지만 나름 만족한 결과를 얻은 것 같고, 기본적은 틀을 잡느라 애먹었다 ㅠㅠ 일단, 구현 내용은 아래에서 설명하겠다!

## 구현 내용
---

[Youtube Link](https://youtu.be/6kQGWcXVxXg)

#### 1. ALS를 버린 <code>Root Motion</code>의 사용
일단 저번에는 ALS를 사용해서 만족한 결과를 얻어봤는데.. 원래 그대로의 ALS를 적용하는 것은 쉬웠지만 애니메이션을 변경하던지의 내 입맛대로 바꾸는게 굉장히 까다로웠다. 전체적인 로직의 흐름을 잘 이해를 못해서 그럴수도 있지만, 지금 제작하는 과정에서 굳이 필요할까?라는 생각을 하고 나만의 로직을 사용하자! 해서 사용했다.

하지만 부드러운 애니메이션을 포기할수는 없었고... 그래서 사용해본 것이 <code>Root Motion</code>이였다! 처음 Unreal을 주먹구구식으로 시작했을때 애니메이션에 있는 <code>Enable Root motion</code>의 차이를 잘 몰랐다. 하지만 <code>Root Motion</code>를 사용하면서 기본적인 애니메이션과의 차이점을 잘 이해할수 있었다! 특히 애니메이션에 따라 캐릭터의 속도조절이 된다는게 신기했다. 이때도 여러 시행착오가 있었지만 결과물은 만족한다!


#### 2. 콤보시스템의 변화
이 부분은 처음에 만들었던 콤보시스템이 계속 중간중간 버그가 나는탓에 살짝 손보았다. 기본적인 로직은 Paragon 콤보시스템에서 가져와서 강공격,약공격을 섞어서 공격할 수 있도록 했다. 
>연속으로 누르면 콤보가 밀리는 느낌이 있어서 이부분은 수정해야할 듯 싶다!


#### 3. Lock On 기능 추가
락온 기능을 처음만들어 본건 아니였는데 이번에는 사뭇 간단하게 제작됐다. <code>Find look at Rotaion</code>의 간단함이란... 가장 가까운 상대를 구해서 Lock On이 된다. 기본공격시에도 가장 가까운 상대쪽으로 회전하는 기능도 넣었다. 아마 다수와 상대할때 편한 기능이 되지 않을까 싶다.
> 이 부분은 Lock On 대상을 변경하는 기능을 추가해봐야겠다


#### 4. Dodge 기능의 추가
점프를 없애고 회피를 넣었다. 다크소울이 생각나서 그랬는데, 점프기능은 추후에 수정 후 추가해볼 생각이다. 일단 회피를 대신해서 넣었고, 실행하면 Ghost Trail이 생겨서 잔상이 남는다! 이 로직은 다른분의 코드를 참조했는데 쓸데가 많을 것같다. 또한 Lock on시에는 상대방에 Control Rotation이 고정되기때문에 4방향의 Dodge가 필요했고, 다행이도 가지고 있는 애니메이션에서 제공했기 때문에 각 방향에 따른 MovementState를 변경해주었고 이에따른 다양한 Dodge 모션이 실행된다! 이 부분은 내가 만들고 맘에들었다.


#### 5. AI구현
저번에 맵 보행 NPC AI로직 구현을 하기로 했고, 사실 위의 기능보다 먼저 작업해보았다. Blackboard와 BehaviorTree는 처음사용해봤는데, 생각보다 어렵지않아서 금방 이해했다! 
> 기본적인 Patrol의 AI로직은 PatrolPath를 따라 움직임 => Player를 발견하면 Chase+> 충분히 접근하면 Attack

AI Perception의 존재도 처음알았는데, 수치조정은 필요해보이지만 신박한 기능이였다. 청력같은 기능도 있었다. 마켓에서 봤던 sight에 대한 로직이 있었는데, line trace를 활용하는 듯 했다. 이 부분은 한번 구현해봐야 할 것같다.

#### 6. 착지시 애니메이션
이 부분은 Player가 착지시, 높이에 따른 다른 애니메이션을 재생해주는 기능이고, 자연스럽게 재생되서 맘에들었다. 다소 높은 곳에서는 착지시 Roll을 수행, 조금 높은 곳에서는 약간 바닥에 털썩 하고 착지하는 느낌이다...! 자세한건 유투브 영상을 참고!

위의 6가지가 주요 내용이고, 하나를 더 추가하자면 <code>HitDetection</code>의 구현인데, 아직 기본적인 기능만 구현해놔서 좀더 만지고 제대로 설명하겠다.


## 차후 구현 내용
---
 - 애니메이션에 이펙트와 효과음 마무리 => **이건 천천히 할 예정, 기능 구현에 중심할 예정이다.**
 - AI를 좀더 덜 공격적으로 바꿀 예정
 - HitDetection 기능 완성
 - Lock On 기능 수정?
 - **전반적인 전투 시스템 구축**
